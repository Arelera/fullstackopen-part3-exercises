(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),c=t.n(o),u=(t(20),t(4)),l=t(2),i=function(e){var n=e.handleNameChange,t=e.handleNumberChange,a=e.onAddClick,o=e.newName,c=e.newNumber;return r.a.createElement("form",null,r.a.createElement("h2",null,"Add a new"),r.a.createElement("div",null,"name: ",r.a.createElement("input",{onChange:n,value:o}),r.a.createElement("br",null),"number: ",r.a.createElement("input",{onChange:t,value:c})),r.a.createElement("button",{onClick:a,type:"submit"},"add"))},s=function(e){var n=e.personsToShow,t=e.setPersonsToShow;return r.a.createElement("div",null,"filter shown with"," ",r.a.createElement("input",{value:n,onChange:function(e){return t(e.target.value.toLowerCase())}})," ")},m=t(3),d=t.n(m),f="/api/persons",b=function(){return d.a.get(f).then((function(e){return e.data}))},p=function(e){return d.a.post(f,e)},h=function(e){return console.log("person in service: ",e),d.a.put("".concat(f,"/").concat(e.id),e)},v=function(e){return console.log("deleting person with id ",e),d.a.delete("".concat(f,"/").concat(e))},E=function(e){var n=e.person,t=e.persons,a=e.setPersons;return r.a.createElement("div",null,r.a.createElement("p",{key:n.name},n.name," ",n.number," ",r.a.createElement("button",{onClick:function(){return e=n.id,void v(e).then((function(n){a(t.filter((function(n){return n.id!==e?n:null})))})).catch((function(e){console.log(e)}));var e}},"delete")))},g=function(e){var n=e.persons,t=e.personsToShow,a=e.setPersons;return r.a.createElement("div",null,r.a.createElement("h2",null,"Numbers"),n.filter((function(e){return e.name.toLowerCase().includes(t)})).map((function(e){return r.a.createElement(E,{key:e.name,person:e,persons:n,setPersons:a})})))},w=function(e){var n=e.msg;return r.a.createElement("div",{style:{display:"inline-block",border:"2px solid #18b566",background:"ebebeb",padding:"0 1rem",margin:".5rem 0"}},r.a.createElement("h3",null,n))},k=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),m=Object(l.a)(c,2),d=m[0],f=m[1],v=Object(a.useState)(""),E=Object(l.a)(v,2),k=E[0],j=E[1],C=Object(a.useState)(""),O=Object(l.a)(C,2),S=O[0],y=O[1],N=Object(a.useState)(""),P=Object(l.a)(N,2),T=P[0],x=P[1];Object(a.useEffect)((function(){b().then((function(e){o(e)}))}),[]);var A=function(e){x(e),setTimeout((function(){x("")}),4e3)};return r.a.createElement("div",{style:{display:"inline-block",border:"2px solid #123",padding:"1rem",color:"#222",background:"#fafafa"}},r.a.createElement("h2",null,"Phonebook"),r.a.createElement(s,{personsToShow:S,setPersonsToShow:y}),T&&r.a.createElement(w,{msg:T}),r.a.createElement(i,{handleNameChange:function(e){f(e.target.value)},handleNumberChange:function(e){j(e.target.value)},onAddClick:function(e){e.preventDefault();var n={name:d,number:k};if(t.every((function(e){return e.name!==d})))p(n).then((function(e){o(t.concat(n)),A("".concat(n.name," added")),f(""),j("")}));else if(window.confirm("".concat(d," is already added to the phonebook, replace the old number with the new one?"))){var a=t.find((function(e){return e.name===d}));a=Object(u.a)(Object(u.a)({},a),{},{number:k}),console.log("updatedPerson",a),h(a),o(t.map((function(e){return e.id!==a.id?e:a}))),A("".concat(a.name," updated")),f(""),j("")}},newName:d,newNumber:k}),r.a.createElement(g,{persons:t,setPersons:o,personsToShow:S}))};c.a.render(r.a.createElement(k,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.ad1906d8.chunk.js.map